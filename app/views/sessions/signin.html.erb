<%
# BigBlueButton open source conferencing system - http://www.bigbluebutton.org/.
# Copyright (c) 2018 BigBlueButton Inc. and by respective authors (see below).
# This program is free software; you can redistribute it and/or modify it under the
# terms of the GNU Lesser General Public License as published by the Free Software
# Foundation; either version 3.0 of the License, or (at your option) any later
# version.
#
# BigBlueButton is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.
# You should have received a copy of the GNU Lesser General Public License along
# with BigBlueButton; if not, see <http://www.gnu.org/licenses/>.
%>

<div class="container-fluid">
  <div class="authentication-card">
    <div class="card">
      <div class="row g-0">
        <!-- align-items-center -->
        <div class="col-lg-6 bg-login d-flex justify-content-center">
          <%= image_tag("login_image.jpg", alt: "Login Image", class: "img-fluid") %>
        </div>
        <div class="col-lg-6">
          <div class="card-body p-4 p-sm-5">
            <h5 class="card-title text-center"><%= t("login_title") %></h5>
            <p class="card-text mb-5 text-center">Sign in to create or start meetings with presentations, web cams, and text chat!</p>
            <%= form_for(:session, url: create_session_path) do |f| %>
              <div class="row g-3">
                <div class="col-12 mb-3">
                  <label for="inputEmailAddress" class="form-label">Email Address</label>
                  <div class="ms-auto position-relative">
                    <%= f.email_field :email, class: "form-control", placeholder: t("email"), value: "", autofocus: "", required: "" %>
                  </div>
                </div>
                <div class="col-12 mb-3">
                  <label for="inputChoosePassword" class="form-label">Enter Password</label>
                  <div class="ms-auto position-relative">
                    <%= f.password_field :password, class: "form-control", placeholder: t("password"), value: "", required: "" %>
                  </div>
                </div>

                <% if Rails.configuration.enable_email_verification %>
                  <div class="col-12  mb-3 text-right">
                    <%= link_to t("modal.login.forgot_password"), new_password_reset_path %>
                </div>
                <% end %>

                <div class="col-12 mb-3">
                  <div class="d-grid">
                    <%= f.submit t("login"), class: "btn btn-primary btn-block signin-button" %>
                  </div>
                </div>
                <div class="col-12 text-center mb-3">
                  <p class="mb-0">Don't have an account yet? <%= link_to t("signup.title"), signup_path %></p>
                </div>
              </div>

              <div class="col-12 my-2 text-center">
                Or Sign In with
              </div>

              <style>
                  .login-with-google-btn {
                    transition: background-color .3s, box-shadow .3s;

                    padding: 12px 16px 12px 42px;
                    border: none;
                    border-radius: 3px;
                    box-shadow: 0 -1px 0 rgba(0, 0, 0, .04), 0 1px 1px rgba(0, 0, 0, .25);

                    color: #757575;
                    font-size: 14px;
                    font-weight: 500;
                    background-color: white;
                    background-repeat: no-repeat;
                    background-position: 12px 11px;

                    &:hover {
                      box-shadow: 0 -1px 0 rgba(0, 0, 0, .04), 0 2px 4px rgba(0, 0, 0, .25);
                    }

                    &:active {
                      background-color: #eeeeee;
                    }

                    &:focus {
                      outline: none;
                      box-shadow:
                        0 -1px 0 rgba(0, 0, 0, .04),
                        0 2px 4px rgba(0, 0, 0, .25),
                        0 0 0 3px #c8dafc;
                    }

                    &:disabled {
                      filter: grayscale(100%);
                      background-color: #ebebeb;
                      box-shadow: 0 -1px 0 rgba(0, 0, 0, .04), 0 1px 1px rgba(0, 0, 0, .25);
                      cursor: not-allowed;
                    }
                  }

              </style>

              <div class="col-12 my-2 text-center">
                <a type="button" class="login-with-google-btn mt-3" href="http://127.0.0.1:8008/login/?redirect_to=https://colabo.raffsoft.com/b/login_with_jwt">
                    <img src="https://www.1stop.co.ug/static/img/logo.png" style="width: 50px;" alt=""> &nbsp;Sign in with 1stop
                </a>
              </div>
              

              <% unless iconset_providers.length.zero? %>

                <% iconset_providers.each do |provider| %>
                  <%= link_to omniauth_login_url(provider), class: "btn btn-white radius-30 customBtn-#{provider} oauth-signin", method: :post do %>
                    <span class="customBtn-icon ">
                      <img class="customBtn-image"></img>
                    </span>
                    <span class="customBtn-text"><%= t("modal.login.with", provider: t("provider.#{provider}")) %></span>
                  <% end %>
                <% end %>
                <div class="or-line my-6">
                  <div>
                    <span class="text-uppercase" style="background-color: #F5F7FB;">
                      <%= t("modal.login.or") %>
                    </span>
                  </div>
                </div>
              <% end %>

            <% end %>
         </div>
        </div>
      </div>
    </div>
  </div>
</div>